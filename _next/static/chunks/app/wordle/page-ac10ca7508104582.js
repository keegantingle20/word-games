(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[168],{87:(e,t,a)=>{"use strict";a.d(t,{$:()=>r});class s{static getInstance(){return s.instance||(s.instance=new s),s.instance}loadGameState(){try{let e=localStorage.getItem("dailyGameState");if(e){let t=JSON.parse(e),a=this.getTodayString();if(t.date!==a)return{wordle:{played:!1,won:!1,guesses:0,word:"",date:a},connections:{played:!1,won:!1,mistakes:0,puzzleId:"",date:a},miniCrossword:{played:!1,won:!1,time:0,date:a}};return t}}catch(e){console.error("Error loading game state:",e)}return{wordle:{played:!1,won:!1,guesses:0,word:"",date:this.getTodayString()},connections:{played:!1,won:!1,mistakes:0,puzzleId:"",date:this.getTodayString()},miniCrossword:{played:!1,won:!1,time:0,date:this.getTodayString()}}}loadStreakData(){try{let e=localStorage.getItem("streakData");if(e)return JSON.parse(e)}catch(e){console.error("Error loading streak data:",e)}return{wordle:0,connections:0,miniCrossword:0,total:0}}saveGameState(){try{localStorage.setItem("dailyGameState",JSON.stringify({...this.gameState,date:this.getTodayString()}))}catch(e){console.error("Error saving game state:",e)}}saveStreakData(){try{localStorage.setItem("streakData",JSON.stringify(this.streakData))}catch(e){console.error("Error saving streak data:",e)}}getTodayString(){return new Date().toISOString().split("T")[0]}isNewDay(){return this.gameState.wordle.date!==this.getTodayString()}hasPlayedToday(e){return this.isNewDay()&&this.resetDailyGames(),this.gameState[e].played}markGamePlayed(e,t,a){this.isNewDay()&&this.resetDailyGames();let s=this.getTodayString();this.gameState[e]={...this.gameState[e],played:!0,won:t,date:s,...a},this.updateStreaks(e,t),this.saveGameState(),this.saveStreakData()}updateStreaks(e,t){t?this.streakData[e]++:this.streakData[e]=0,this.streakData.total=Math.max(this.streakData.wordle,this.streakData.connections,this.streakData.miniCrossword)}resetDailyGames(){let e=this.getTodayString();this.gameState={wordle:{played:!1,won:!1,guesses:0,word:"",date:e},connections:{played:!1,won:!1,mistakes:0,puzzleId:"",date:e},miniCrossword:{played:!1,won:!1,time:0,date:e}}}getStreaks(){return this.isNewDay()&&this.resetDailyGames(),{...this.streakData}}getGameState(e){return this.isNewDay()&&this.resetDailyGames(),{...this.gameState[e]}}getShareText(e){let t=this.getGameState(e);if(this.getStreaks(),!t.played)return"";switch(e){case"wordle":if(!t.won)return"Wordle ".concat(this.getPuzzleNumber()," X/6\n\n").concat(this.getWordleGrid());return"Wordle ".concat(this.getPuzzleNumber()," ").concat(t.guesses,"/6\n\n").concat(this.getWordleGrid());case"connections":if(!t.won)return"Connections ".concat(this.getPuzzleNumber()," X/4\n\n").concat(this.getConnectionsGrid());return"Connections ".concat(this.getPuzzleNumber()," ").concat(4-t.mistakes,"/4\n\n").concat(this.getConnectionsGrid());case"miniCrossword":let a=Math.floor(t.time/60),s=t.time%60,r=a>0?"".concat(a,":").concat(s.toString().padStart(2,"0")):"".concat(s,"s");return"Mini Crossword ".concat(this.getPuzzleNumber()," ").concat(r);default:return""}}getPuzzleNumber(){let e=new Date("2024-01-01");return Math.floor((new Date().getTime()-e.getTime())/864e5)+1}getWordleGrid(){return"⬜⬜⬜⬜⬜\n⬜⬜⬜⬜⬜\n⬜⬜⬜⬜⬜\n⬜⬜⬜⬜⬜\n⬜⬜⬜⬜⬜\n⬜⬜⬜⬜⬜"}getConnectionsGrid(){return"\uD83D\uDFE8\uD83D\uDFE8\uD83D\uDFE8\uD83D\uDFE8\n\uD83D\uDFE9\uD83D\uDFE9\uD83D\uDFE9\uD83D\uDFE9\n\uD83D\uDFE6\uD83D\uDFE6\uD83D\uDFE6\uD83D\uDFE6\n\uD83D\uDFEA\uD83D\uDFEA\uD83D\uDFEA\uD83D\uDFEA"}resetAllData(){this.gameState={wordle:{played:!1,won:!1,guesses:0,word:"",date:this.getTodayString()},connections:{played:!1,won:!1,mistakes:0,puzzleId:"",date:this.getTodayString()},miniCrossword:{played:!1,won:!1,time:0,date:this.getTodayString()}},this.streakData={wordle:0,connections:0,miniCrossword:0,total:0},this.saveGameState(),this.saveStreakData()}constructor(){this.gameState=this.loadGameState(),this.streakData=this.loadStreakData()}}let r=s.getInstance()},2435:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>g});var s=a(5155),r=a(2115),l=a(1733),n=a(5016);let o=["qwertyuiop","asdfghjkl","zxcvbnm"];function i(e){let{onKey:t,keyStates:a}=e;return(0,s.jsx)("div",{className:"mx-auto max-w-md select-none",children:o.map((e,r)=>(0,s.jsxs)("div",{className:"flex justify-center gap-1 mb-1",children:[2===r&&(0,s.jsx)("button",{onClick:()=>t("Enter"),className:"px-3 text-sm h-10 rounded-md bg-black/10 dark:bg-white/10",children:"Enter"}),e.split("").map(e=>{let r=a[e];return(0,s.jsx)("button",{onClick:()=>t(e),className:(0,n.cn)("h-10 w-8 rounded-md text-sm capitalize","bg-black/10 dark:bg-white/10","hit"===r&&"bg-green-500 text-white","near"===r&&"bg-yellow-400 text-black","miss"===r&&"bg-neutral-400 text-black"),children:e},e)}),2===r&&(0,s.jsx)("button",{onClick:()=>t("Backspace"),className:"px-3 text-sm h-10 rounded-md bg-black/10 dark:bg-white/10",children:"⌫"})]},r))})}var d=a(9754),c=a(1708),m=a(87);function g(){console.log("\uD83C\uDFAE WordlePage component rendering");let[e,t]=(0,r.useState)(null),[a,o]=(0,r.useState)([]),[g,u]=(0,r.useState)(""),[h,x]=(0,r.useState)(null),[w,y]=(0,r.useState)(new Set),[p,k]=(0,r.useState)([]),[S,b]=(0,r.useState)([]),[f,N]=(0,r.useState)(""),[v,C]=(0,r.useState)("playing"),[j,D]=(0,r.useState)(""),[T,A]=(0,r.useState)(null),[z,E]=(0,r.useState)(!1),[G,P]=(0,r.useState)(!1),[I,B]=(0,r.useState)(0),W=(0,r.useRef)({games:0,wins:0,streak:0,maxStreak:0,dist:[0,0,0,0,0,0]});(0,r.useEffect)(()=>{try{let e=localStorage.getItem("stats");e&&(W.current=JSON.parse(e))}catch(e){}},[]),(0,r.useEffect)(()=>{let e=!1;return(async()=>{try{console.log("\uD83C\uDFAE Wordle page loading...");let a=await (0,d.Ac)();if(console.log("\uD83D\uDCDA Personal list result:",a?"".concat(a.words.length," words"):"null"),a&&!e){console.log("✅ Using personal word collection"),t(a),o(a.words);let e=new Set(a.words.map(e=>e.word));y(e);let s=new Date,r=Math.floor((s.getTime()-new Date(s.getFullYear(),0,0).getTime())/864e5),l=r%a.words.length,n=a.words[l].word;console.log("\uD83C\uDFAF Today's word from personal collection: ".concat(n," (day ").concat(r,", index ").concat(l,")")),u(n),x(a.words[l])}else{console.log("⚠️ Falling back to built-in words");let t=(0,d.Cl)();if(e)return;console.log("\uD83C\uDFAF Today's word from built-in: ".concat(t)),u(t),x({word:t,categories:["daily"],metadata:{difficulty:"medium",themes:["daily"],personal:{note:"Today's word"}}});let a=new Set([t]);y(a)}{let e=m.$.hasPlayedToday("wordle");if(E(e),e){P(!0);let e=m.$.getGameState("wordle");if(e.won){C("won");let t="guesses"in e?e.guesses:6;k(Array(t).fill("")),b(Array(t).fill([]))}else C("lost"),k(Array(6).fill("")),b(Array(6).fill([]))}let t=m.$.getStreaks();B(t.wordle)}}catch(e){console.error(e),D("Failed to load words")}})(),()=>{e=!0}},[]);let O=(0,r.useCallback)(e=>{if(console.log("\uD83D\uDD11 onKey called with:",e),console.log("\uD83D\uDD0D Current game state:",{game:v,gameComplete:G,current:f,answer:g}),"A"===e||"a"===e){console.log("✅ Adding A to current word"),N(e=>{let t=e+"A";return console.log("\uD83D\uDCDD New current word:",t),t});return}if("playing"!==v||G)return void console.log("⚠️ Game not in playing state - ignoring key");if("ENTER"===e){if(5!==f.length){D("Not enough letters"),setTimeout(()=>D(""),2e3);return}if(!w.has(f)){D("Not in word list"),setTimeout(()=>D(""),2e3);return}let e=[...p,f],t=[...S,function(e,t){let a=t.length,s=Array(a).fill("miss"),r=t.split(""),l=e.split(""),n=Array(a).fill(!1);for(let e=0;e<a;e++)l[e]===r[e]&&(s[e]="hit",n[e]=!0,l[e]="_");for(let e=0;e<a;e++){if("hit"===s[e])continue;let t=r.findIndex((t,a)=>t===l[e]&&!n[a]);-1!==t&&(s[e]="near",n[t]=!0)}return s}(f,g)];k(e),b(t),f===g?(C("won"),D("Correct!"),(0,c.A)({particleCount:100,spread:70,origin:{y:.6}}),m.$.markGamePlayed("wordle",!0,{guesses:e.length,word:g}),P(!0),W.current.games++,W.current.wins++,W.current.streak++,W.current.maxStreak=Math.max(W.current.maxStreak,W.current.streak),W.current.dist[e.length-1]++,localStorage.setItem("stats",JSON.stringify(W.current)),B(W.current.streak)):6===e.length&&(C("lost"),D("The word was ".concat(g.toUpperCase())),m.$.markGamePlayed("wordle",!1,{guesses:6,word:g}),P(!0),W.current.games++,W.current.streak=0,localStorage.setItem("stats",JSON.stringify(W.current)),B(0)),N("")}else"BACKSPACE"===e?N(e=>e.slice(0,-1)):e.match(/[A-Z]/)&&1===e.length&&N(t=>t.length<5?t+e:t)},[v,G,f,g,p,S,w]);console.log("\uD83D\uDD27 onKey function defined:",typeof O),(0,r.useEffect)(()=>{console.log("\uD83D\uDCDD Current state changed to:",f)},[f]),(0,r.useEffect)(()=>{let e=e=>{console.log("\uD83C\uDFB9 Keyboard pressed:",e.key);let t=e.key.toUpperCase();t.match(/[A-Z]/)&&1===t.length?(console.log("\uD83D\uDCDD Letter key:",t),O(t)):"ENTER"===t?(console.log("⏎ Enter key"),O("ENTER")):"BACKSPACE"===t&&(console.log("⌫ Backspace key"),O("BACKSPACE"))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[O]);let F=()=>{let e=m.$.getShareText("wordle");navigator.clipboard?(navigator.clipboard.writeText(e),D("Results copied to clipboard!"),setTimeout(()=>D(""),2e3)):alert(e)};return z?(0,s.jsx)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:(0,s.jsxs)("div",{className:"max-w-md mx-auto text-center",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold text-slate-900 dark:text-slate-100 mb-8",children:"Wordle"}),(0,s.jsxs)("div",{className:"bg-slate-50 dark:bg-slate-800 rounded-lg p-8 mb-6",children:[(0,s.jsx)("div",{className:"text-6xl mb-4",children:"✅"}),(0,s.jsx)("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Puzzle Complete!"}),(0,s.jsx)("p",{className:"text-slate-600 dark:text-slate-400 mb-4",children:"won"===v?"You solved today's Wordle in ".concat(p.length,"/6!"):"Better luck tomorrow!"}),(0,s.jsxs)("div",{className:"text-sm text-slate-500 dark:text-slate-500 mb-4",children:["Current Streak: ",I]}),(0,s.jsx)("button",{onClick:F,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium",children:"Share Results"})]}),(0,s.jsx)("p",{className:"text-sm text-slate-500 dark:text-slate-500",children:"Come back tomorrow for a new puzzle!"})]})}):(0,s.jsx)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:(0,s.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold text-slate-900 dark:text-slate-100",children:"Wordle"}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"text-sm text-slate-500 dark:text-slate-500",children:["Streak: ",I]}),G&&(0,s.jsx)("button",{onClick:F,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium",children:"Share"})]})]}),j&&(0,s.jsx)(l.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"mb-6 text-center text-sm font-medium text-slate-600 dark:text-slate-400",children:j}),(0,s.jsx)("div",{className:"space-y-2 mb-8",children:Array.from({length:6}).map((e,t)=>(0,s.jsx)("div",{className:"flex gap-2",children:Array.from({length:5}).map((e,a)=>{var r,o;let i=(null==(r=p[t])?void 0:r[a])||t===p.length&&f[a]||"",d=null==(o=S[t])?void 0:o[a],c=T===t;return(0,s.jsx)(l.P.div,{className:(0,n.cn)("w-12 h-12 border-2 flex items-center justify-center text-lg font-bold uppercase","hit"===d&&"bg-green-500 text-white border-green-500","near"===d&&"bg-yellow-500 text-white border-yellow-500","miss"===d&&"bg-slate-500 text-white border-slate-500",!d&&i&&"border-slate-300 dark:border-slate-600",!d&&!i&&"border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800"),animate:c?{x:[-2,2,-2,2,0]}:{},transition:{duration:.3},children:i},a)})},t))}),(0,s.jsx)(i,{onKey:O,keyStates:{}}),(0,s.jsxs)("div",{className:"mt-4 text-center space-y-2",children:[(0,s.jsx)("button",{onClick:()=>{console.log("Button clicked!"),alert("Button clicked!"),O("A")},className:"px-4 py-2 bg-blue-500 text-white rounded mr-2",children:"Test Key A"}),(0,s.jsx)("button",{onClick:()=>{console.log("Direct setCurrent called!"),N(e=>e+"B")},className:"px-4 py-2 bg-green-500 text-white rounded",children:"Direct Add B"}),(0,s.jsxs)("div",{className:"text-sm text-gray-600",children:['Current word: "',f,'"']})]}),"won"===v&&(0,s.jsxs)(l.P.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"mt-8 text-center",children:[(0,s.jsx)("div",{className:"text-2xl mb-2",children:"\uD83C\uDF89"}),(0,s.jsx)("div",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Congratulations!"}),(0,s.jsxs)("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:["You solved today's Wordle in ",p.length,"/6!"]})]}),"lost"===v&&(0,s.jsxs)(l.P.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"mt-8 text-center",children:[(0,s.jsx)("div",{className:"text-2xl mb-2",children:"\uD83D\uDE14"}),(0,s.jsx)("div",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Better luck tomorrow!"}),(0,s.jsxs)("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:["The word was ",g.toUpperCase()]})]})]})})}},5016:(e,t,a)=>{"use strict";function s(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter(Boolean).join(" ")}a.d(t,{cn:()=>s})},5108:(e,t,a)=>{Promise.resolve().then(a.bind(a,2435))}},e=>{e.O(0,[733,708,754,441,255,358],()=>e(e.s=5108)),_N_E=e.O()}]);