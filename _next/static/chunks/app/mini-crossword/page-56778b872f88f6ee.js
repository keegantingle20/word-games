(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[997],{87:(t,e,a)=>{"use strict";a.d(e,{$:()=>r});class s{static getInstance(){return s.instance||(s.instance=new s),s.instance}loadGameState(){try{let t=localStorage.getItem("dailyGameState");if(t){let e=JSON.parse(t),a=this.getTodayString();if(e.date!==a)return{wordle:{played:!1,won:!1,guesses:0,word:"",date:a},connections:{played:!1,won:!1,mistakes:0,puzzleId:"",date:a},miniCrossword:{played:!1,won:!1,time:0,date:a}};return e}}catch(t){console.error("Error loading game state:",t)}return{wordle:{played:!1,won:!1,guesses:0,word:"",date:this.getTodayString()},connections:{played:!1,won:!1,mistakes:0,puzzleId:"",date:this.getTodayString()},miniCrossword:{played:!1,won:!1,time:0,date:this.getTodayString()}}}loadStreakData(){try{let t=localStorage.getItem("streakData");if(t)return JSON.parse(t)}catch(t){console.error("Error loading streak data:",t)}return{wordle:0,connections:0,miniCrossword:0,total:0}}saveGameState(){try{localStorage.setItem("dailyGameState",JSON.stringify({...this.gameState,date:this.getTodayString()}))}catch(t){console.error("Error saving game state:",t)}}saveStreakData(){try{localStorage.setItem("streakData",JSON.stringify(this.streakData))}catch(t){console.error("Error saving streak data:",t)}}getTodayString(){return new Date().toISOString().split("T")[0]}isNewDay(){return this.gameState.wordle.date!==this.getTodayString()}hasPlayedToday(t){return this.isNewDay()&&this.resetDailyGames(),this.gameState[t].played}markGamePlayed(t,e,a){this.isNewDay()&&this.resetDailyGames();let s=this.getTodayString();this.gameState[t]={...this.gameState[t],played:!0,won:e,date:s,...a},this.updateStreaks(t,e),this.saveGameState(),this.saveStreakData()}updateStreaks(t,e){e?this.streakData[t]++:this.streakData[t]=0,this.streakData.total=Math.max(this.streakData.wordle,this.streakData.connections,this.streakData.miniCrossword)}resetDailyGames(){let t=this.getTodayString();this.gameState={wordle:{played:!1,won:!1,guesses:0,word:"",date:t},connections:{played:!1,won:!1,mistakes:0,puzzleId:"",date:t},miniCrossword:{played:!1,won:!1,time:0,date:t}}}getStreaks(){return this.isNewDay()&&this.resetDailyGames(),{...this.streakData}}getGameState(t){return this.isNewDay()&&this.resetDailyGames(),{...this.gameState[t]}}getShareText(t){let e=this.getGameState(t);if(this.getStreaks(),!e.played)return"";switch(t){case"wordle":if(!e.won)return"Wordle ".concat(this.getPuzzleNumber()," X/6\n\n").concat(this.getWordleGrid());return"Wordle ".concat(this.getPuzzleNumber()," ").concat(e.guesses,"/6\n\n").concat(this.getWordleGrid());case"connections":if(!e.won)return"Connections ".concat(this.getPuzzleNumber()," X/4\n\n").concat(this.getConnectionsGrid());return"Connections ".concat(this.getPuzzleNumber()," ").concat(4-e.mistakes,"/4\n\n").concat(this.getConnectionsGrid());case"miniCrossword":let a=Math.floor(e.time/60),s=e.time%60,r=a>0?"".concat(a,":").concat(s.toString().padStart(2,"0")):"".concat(s,"s");return"Mini Crossword ".concat(this.getPuzzleNumber()," ").concat(r);default:return""}}getPuzzleNumber(){let t=new Date("2024-01-01");return Math.floor((new Date().getTime()-t.getTime())/864e5)+1}getWordleGrid(){return"⬜⬜⬜⬜⬜\n⬜⬜⬜⬜⬜\n⬜⬜⬜⬜⬜\n⬜⬜⬜⬜⬜\n⬜⬜⬜⬜⬜\n⬜⬜⬜⬜⬜"}getConnectionsGrid(){return"\uD83D\uDFE8\uD83D\uDFE8\uD83D\uDFE8\uD83D\uDFE8\n\uD83D\uDFE9\uD83D\uDFE9\uD83D\uDFE9\uD83D\uDFE9\n\uD83D\uDFE6\uD83D\uDFE6\uD83D\uDFE6\uD83D\uDFE6\n\uD83D\uDFEA\uD83D\uDFEA\uD83D\uDFEA\uD83D\uDFEA"}resetAllData(){this.gameState={wordle:{played:!1,won:!1,guesses:0,word:"",date:this.getTodayString()},connections:{played:!1,won:!1,mistakes:0,puzzleId:"",date:this.getTodayString()},miniCrossword:{played:!1,won:!1,time:0,date:this.getTodayString()}},this.streakData={wordle:0,connections:0,miniCrossword:0,total:0},this.saveGameState(),this.saveStreakData()}constructor(){this.gameState=this.loadGameState(),this.streakData=this.loadStreakData()}}let r=s.getInstance()},809:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>i});var s=a(5155),r=a(2115),o=a(5016),l=a(87),n=a(9754);function i(){let[t,e]=(0,r.useState)([]),[a,i]=(0,r.useState)({across:[],down:[]}),[d,c]=(0,r.useState)(null),[m,g]=(0,r.useState)(null),[h,u]=(0,r.useState)(!1),[x,w]=(0,r.useState)(!1),[b,k]=(0,r.useState)(0),[p,y]=(0,r.useState)(0),[f,S]=(0,r.useState)(!1),[v,C]=(0,r.useState)(!1),N=(0,r.useRef)(null);(0,r.useEffect)(()=>{{let t=l.$.hasPlayedToday("miniCrossword");S(t),t?(C(!0),y(l.$.getGameState("miniCrossword").time)):j()}},[]);let j=()=>{let{grid:t,clues:a}=(0,n.oO)();e(t.map((t,e)=>t.map((t,s)=>{var r,o;return{letter:t||"",isBlack:!t,isSelected:!1,isCorrect:!1,clue:{across:null==(r=a.across.find(t=>t.startRow===e&&t.startCol<=s&&s<t.startCol+t.length))?void 0:r.text,down:null==(o=a.down.find(t=>t.startRow<=e&&e<t.startRow+t.length&&t.startCol===s))?void 0:o.text}}}))),i(a)},D=(e,s)=>{if(v||!x||t[e][s].isBlack)return;c({row:e,col:s});let r=a.across.find(t=>t.startRow===e&&t.startCol<=s&&s<t.startCol+t.length),o=a.down.find(t=>t.startRow<=e&&e<t.startRow+t.length&&t.startCol===s);r&&o||r?g(r):o&&g(o)},z=a=>{if(!d||v)return;let{row:s,col:r}=d,o=[...t];"Backspace"===a.key?o[s][r].letter="":a.key.match(/[A-Za-z]/)?(o[s][r].letter=a.key.toUpperCase(),G(o,s,r)):("ArrowRight"===a.key||"ArrowLeft"===a.key||"ArrowUp"===a.key||"ArrowDown"===a.key)&&R(a.key),e(o)},R=t=>{if(!d)return;let{row:e,col:s}=d,r=a.across.find(t=>t.startRow===e&&t.startCol<=s&&s<t.startCol+t.length)||a.down.find(t=>t.startRow<=e&&e<t.startRow+t.length&&t.startCol===s);r&&("across"===r.direction?"ArrowLeft"===t&&s>r.startCol?s--:"ArrowRight"===t&&s<r.startCol+r.length-1&&s++:"ArrowUp"===t&&e>r.startRow?e--:"ArrowDown"===t&&e<r.startRow+r.length-1&&e++,D(e,s))},G=(t,e,s)=>{let r=a.across.find(t=>t.startRow===e&&t.startCol<=s&&s<t.startCol+t.length);if(r){let e=r.answer,a=!0,s=!0;for(let o=0;o<r.length;o++){let l=t[r.startRow][r.startCol+o].letter;if(!l){a=!1;break}l!==e[o]&&(s=!1)}if(a&&s)for(let e=0;e<r.length;e++)t[r.startRow][r.startCol+e].isCorrect=!0}let o=a.down.find(t=>t.startRow<=e&&e<t.startRow+t.length&&t.startCol===s);if(o){let e=o.answer,a=!0,s=!0;for(let r=0;r<o.length;r++){let l=t[o.startRow+r][o.startCol].letter;if(!l){a=!1;break}l!==e[r]&&(s=!1)}if(a&&s)for(let e=0;e<o.length;e++)t[o.startRow+e][o.startCol].isCorrect=!0}[...a.across,...a.down].every(e=>{for(let a=0;a<e.length;a++)if(!("across"===e.direction?t[e.startRow][e.startCol+a]:t[e.startRow+a][e.startCol]).isCorrect)return!1;return!0})&&!h&&(u(!0),N.current&&clearInterval(N.current),l.$.markGamePlayed("miniCrossword",!0,{time:p}),C(!0))};(0,r.useEffect)(()=>{if(x&&!v)return document.addEventListener("keydown",z),()=>document.removeEventListener("keydown",z)},[d,x,v]);let T=()=>{let t=l.$.getShareText("miniCrossword");navigator.clipboard?navigator.clipboard.writeText(t):alert(t)},E=t=>{let e=Math.floor(t/60),a=t%60;return e>0?"".concat(e,":").concat(a.toString().padStart(2,"0")):"".concat(a,"s")};return f?(0,s.jsx)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:(0,s.jsxs)("div",{className:"max-w-2xl mx-auto text-center",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold text-slate-900 dark:text-slate-100 mb-8",children:"Mini Crossword"}),(0,s.jsxs)("div",{className:"bg-slate-50 dark:bg-slate-800 rounded-lg p-8 mb-6",children:[(0,s.jsx)("div",{className:"text-6xl mb-4",children:"✅"}),(0,s.jsx)("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Puzzle Complete!"}),(0,s.jsxs)("p",{className:"text-slate-600 dark:text-slate-400 mb-4",children:["You solved today's Mini Crossword in ",E(p)]}),(0,s.jsx)("button",{onClick:T,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium",children:"Share Results"})]}),(0,s.jsx)("p",{className:"text-sm text-slate-500 dark:text-slate-500",children:"Come back tomorrow for a new puzzle!"})]})}):(0,s.jsx)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold text-slate-900 dark:text-slate-100",children:"Mini Crossword"}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[x&&(0,s.jsx)("div",{className:"text-lg font-mono text-slate-600 dark:text-slate-400",children:E(p)}),v&&(0,s.jsx)("button",{onClick:T,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium",children:"Share"})]})]}),x?(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,s.jsx)("div",{className:"lg:col-span-2",children:(0,s.jsx)("div",{className:"grid grid-cols-6 gap-1 max-w-md mx-auto",children:t.map((t,e)=>t.map((t,a)=>(0,s.jsxs)("div",{className:(0,o.cn)("aspect-square border-2 flex items-center justify-center text-lg font-bold cursor-pointer transition-colors relative",t.isBlack?"bg-black border-black":t.isSelected?"bg-blue-200 dark:bg-blue-800 border-blue-500":t.isCorrect?"bg-green-200 dark:bg-green-800 border-green-500":"bg-white dark:bg-slate-700 border-slate-300 dark:border-slate-600 hover:bg-slate-100 dark:hover:bg-slate-600"),onClick:()=>D(e,a),children:[t.number&&(0,s.jsx)("div",{className:"absolute top-0 left-0 text-xs text-slate-500",children:t.number}),t.letter]},"".concat(e,"-").concat(a))))})}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-3",children:"Across"}),(0,s.jsx)("div",{className:"space-y-2",children:a.across.map(t=>(0,s.jsxs)("div",{className:(0,o.cn)("p-3 rounded-lg cursor-pointer transition-colors",(null==m?void 0:m.number)===t.number&&(null==m?void 0:m.direction)==="across"?"bg-blue-100 dark:bg-blue-900":"hover:bg-slate-100 dark:hover:bg-slate-800"),onClick:()=>g(t),children:[(0,s.jsxs)("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:[t.number,"."]}),(0,s.jsx)("span",{className:"text-slate-700 dark:text-slate-300 ml-1",children:t.text})]},t.number))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-3",children:"Down"}),(0,s.jsx)("div",{className:"space-y-2",children:a.down.map(t=>(0,s.jsxs)("div",{className:(0,o.cn)("p-3 rounded-lg cursor-pointer transition-colors",(null==m?void 0:m.number)===t.number&&(null==m?void 0:m.direction)==="down"?"bg-blue-100 dark:bg-blue-900":"hover:bg-slate-100 dark:hover:bg-slate-800"),onClick:()=>g(t),children:[(0,s.jsxs)("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:[t.number,"."]}),(0,s.jsx)("span",{className:"text-slate-700 dark:text-slate-300 ml-1",children:t.text})]},t.number))})]})]})]}):(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("div",{className:"text-6xl mb-4",children:"\uD83E\uDDE9"}),(0,s.jsx)("h2",{className:"text-2xl font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Ready to solve today's Mini Crossword?"}),(0,s.jsx)("p",{className:"text-slate-600 dark:text-slate-400 mb-6",children:"Complete the puzzle as fast as you can!"}),(0,s.jsx)("button",{onClick:()=>{w(!0),k(Date.now()),y(0),N.current=setInterval(()=>{y(Math.floor((Date.now()-b)/1e3))},1e3)},className:"px-8 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-lg font-medium",children:"Start Puzzle"})]})]})})}},2135:(t,e,a)=>{Promise.resolve().then(a.bind(a,809))},5016:(t,e,a)=>{"use strict";function s(){for(var t=arguments.length,e=Array(t),a=0;a<t;a++)e[a]=arguments[a];return e.filter(Boolean).join(" ")}a.d(e,{cn:()=>s})}},t=>{t.O(0,[754,441,255,358],()=>t(t.s=2135)),_N_E=t.O()}]);